Battle game logic using TCP server (for study)